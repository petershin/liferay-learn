---
toc:
  - ./troubleshooting-elasticsearch-installation/troubleshooting-the-elasticsearch-connection.md
  - ./troubleshooting-elasticsearch-installation/troubleshooting-elasticsearch-common-issues.md
taxonomy-category-names:
- Search
- Search Engine Installation and Maintenance
- Liferay Self-Hosted
uuid: 91d8afef-b78a-4561-8080-213d8e1cf91a
---

# Troubleshooting Elasticsearch Installation

Liferay and Elasticsearch are complex systems full of configurations. When [connecting them](./getting-started-with-elasticsearch.md), you can run into difficulty along the way. Included below are techniques for troubleshooting.

To learn about some common issues and how to solve them, see

- [Troubleshooting the Elasticsearch Connection](./troubleshooting-elasticsearch-installation/troubleshooting-the-elasticsearch-connection.md)
- [Troubleshooting Elasticsearch: Common Issues](./troubleshooting-elasticsearch-installation/troubleshooting-elasticsearch-common-issues.md)

To troubleshoot the sidecar Elasticsearch server bundled with Liferay, see [Troubleshooting the Sidecar/Embedded Elasticsearch](./using-the-sidecar-or-embedded-elasticsearch.md#troubleshooting-the-sidecar-embedded-elasticsearch).

## Inspecting the Search Bar's Elasticsearch Query

Liferay's search infrastructure generates a large Elasticsearch request whenever users search from the Search Bar widget. To inspect the query sent to Elasticsearch, use the Search Insights widget. For more information see [Search Insights](../../search-pages-and-widgets/search-insights.md).

## Inspecting any Liferay-Generated Elasticsearch Query

To inspect any Elasticsearch query generated by Liferay, set the log level for `com.liferay.portal.search.elasticsearch7.internal.ElasticsearchIndexSearcher` to `INFO` level using the [Server Administration Log Levels UI](../../../system-administration/using-the-server-administration-panel/configuring-logging.md).

```{tip}
If you are on Liferay 7.1-7.2 and using the default bundled Connector to Elasticsearch 6, change the version number in the package name from `7` to `6`.
```

## Enabling Verbose SSL Logging

To troubleshoot encryption related issues, enable verbose SSL logging.

For Liferay, set `-Djavax.net.debug=ssl:handshake:verbose` in the Application Server's JVM. In Tomcat the option is added to `CATALINA_OPTS` in `setenv.sh`:

```properties
CATALINA_OPTS="$CATALINA_OPTS -Djavax.net.debug=ssl:handshake:verbose"
```

For Elasticsearch, add `-Djavax.net.debug=ssl:handshake:verbose` to the end of `[Elasticsearch Home]/config/jvm.options`.
