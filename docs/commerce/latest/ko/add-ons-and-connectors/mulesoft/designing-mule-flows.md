# 노새 흐름 설계

[Liferay Connector를 MuleSoft](./configuring-the-mulesoft-connector.md)로 구성한 후 Mule 흐름 구축을 시작할 수 있습니다. 이러한 작업은 Liferay의 OpenAPI 끝점에서 사용할 수 있습니다.

* 레코드 만들기
* 레코드 삭제
* 레코드 가져오기
* 레코드 업데이트
* 배치 - 레코드 내보내기
* 배치 - 레코드 가져오기 - 만들기
* 배치 - 레코드 가져오기 - 삭제
* 배치 - 레코드 가져오기 - 업데이트

대규모 데이터 세트로 작업하는 경우 Liferay의 배치 작업을 사용하여 데이터를 더 빠르게 제출하고 처리할 수 있습니다.

## 레코드 작업 생성

이 작업은 선택한 OpenAPI 3.0 문서에 대해 POST 메서드가 처리하는 모든 엔드포인트를 노출합니다. Liferay MuleSoft 커넥터에서 지원하는 다양한 작업에 대한 참조로 `http://[host]:[port]/o/api` 에서 Liferay의 API 탐색기를 사용하십시오. 커넥터 구성의 끝점에서 OpenAPI 문서를 사용할 수도 있습니다.

![제품 끝점은 HTTP POST를 사용하여 새 제품을 만듭니다.](./designing-mule-flows/images/01.png)

끝점을 선택하면 커넥터가 관련 메타데이터를 자동으로 생성합니다. 그런 다음 입력 매개변수를 지정할 수 있습니다. 입력 매개변수는 모든 Liferay RESTful 웹 서비스를 지원하지만 모든 엔드포인트에 필요한 것은 아닙니다.

| 매개변수 이름 | 유형 | 묘사                              | 요구하는           |
|:------- |:-- |:------------------------------- |:-------------- |
| 끝점      | 끈  | 만들기 작업을 지원하는 사용 가능한 끝점의 드롭다운 목록 | 그렇다            |
| 레코드     | 객체 | 생성할 개체                          | 그렇다            |
| 경로 매개변수 | 객체 | 경로 매개변수 값으로 매핑                  | 예(끝점에서 필요한 경우) |
| 쿼리 매개변수 | 객체 | 쿼리 매개변수 값으로 매핑                  | 부정             |

![Salesforce에서 Liferay로 제품을 가져오는 흐름에서 제품 끝점을 사용합니다.](./designing-mule-flows/images/02.png)

위의 단계에 따라 흐름에서 다른 작업을 구성하고 사용할 수 있습니다.

## 일괄 내보내기 작업

이 작업을 사용하면 단일 요청으로 지정된 엔터티의 모든 레코드를 가져올 수 있습니다. 레코드가 많을 때 유용합니다. 레코드가 몇 개만 있는 경우 **레코드 가져오기** 작업을 사용합니다.

![배치 - 레코드 내보내기 작업을 사용하여 여러 레코드를 내보냅니다.](./designing-mule-flows/images/03.png)

일괄 내보내기 작업을 구성하려면 클래스 이름 드롭다운을 사용하여 내보낼 엔터티를 선택합니다. 커넥터를 선택하면 커넥터가 관련 출력 메타데이터를 동적으로 생성합니다. 원하는 경우 필드 이름 입력을 사용하여 내보낸 엔터티에 포함할 필드를 지정할 수 있습니다. 필드 이름은 쉼표를 사용하여 구분해야 합니다. 일괄 처리 로직에서 필요한 경우 **사이트 ID** 매개변수를 지정할 수도 있습니다.

| 매개변수 이름 | 유형 | 묘사                                                                                                                                                            | 요구하는 |
|:------- |:-- |:------------------------------------------------------------------------------------------------------------------------------------------------------------- |:---- |
| 클래스 이름  | 끈  | 내보낸 엔티티의 클래스 이름                                                                                                                                               | 그렇다  |
| 사이트 ID  | 끈  | [REST 서비스 사용](https://learn.liferay.com/w/dxp/headless-delivery/consuming-apis/consuming-rest-services#identify-the-site-containing-the-data) 쿼리 매개변수 | 부정   |
| 필드 이름   | 끈  | 내보낸 엔터티 필드의 쉼표로 구분된 목록                                                                                                                                        | 부정   |

이 흐름을 실행하면 다른 애플리케이션으로 변환 및 로드할 준비가 된 JSON 배열이 생성됩니다.

## 일괄 가져오기 작업

사용 가능한 일괄 가져오기 작업에는 생성, 삭제 및 업데이트의 세 가지가 있습니다. 각 작업은 엔터티 집합을 가져오지만 Liferay의 배치 엔진은 엔터티를 다르게 처리합니다. 아래 이미지는 일괄 가져오기 생성 작업을 보여줍니다.

![Batch - Import Records 작업을 사용하여 대량 레코드를 가져옵니다.](./designing-mule-flows/images/04.png)

일괄 가져오기 작업을 구성하려면 먼저 **클래스 이름** 드롭다운을 사용하여 가져오려는 엔터티를 선택합니다. 커넥터를 선택하면 커넥터가 관련 입력 메타데이터를 동적으로 생성합니다. 그런 다음 **레코드** 필드를 사용하여 엔티티 개체의 JSON 배열을 제출합니다. 원하는 경우 **필드 이름 매핑** 드롭다운을 사용하여 서로 다른 시스템의 관련 엔터티 간에 필드 이름을 매핑합니다.

```{note}
*Transform Message* 모듈을 사용하여 원본 시스템과 대상 시스템 간에 엔터티 필드를 매핑한 경우 *Field name mappings*를 비워둘 수 있습니다.
```

| 매개변수 이름  | 유형 | 묘사               | 요구하는 |
|:-------- |:-- |:---------------- |:---- |
| 클래스 이름   | 끈  | 가져온 엔터티의 클래스 이름  | 그렇다  |
| 필드 이름 매핑 | 객체 | 필드 이름 매핑 정의로 채워짐 | 부정   |
| 레코드      | 객체 | 엔티티 개체의 JSON 배열  | 그렇다  |

사용 가능한 모든 작업 및 관련 입력 매개변수를 보려면 [Liferay MuleSoft 커넥터 기술 참조](https://github.com/liferay/liferay-etl-mulesoft/blob/master/docs/liferay-connector-tech-ref.adoc) 을 참조하십시오.

## 관련 주제

* [MuleSoft 커넥터 구성](./configuring-the-mulesoft-connector.md)
* [Liferay MuleSoft 커넥터 기술 참조](https://github.com/liferay/liferay-etl-mulesoft/blob/master/docs/liferay-connector-tech-ref.adoc)
